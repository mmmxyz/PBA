name: ubuntu

on:
    push:
        branches: [main]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - name: install glfw openmp
          working-directory: .
          run: |
              sudo apt-get install libglfw3 libglfw3-dev
              sudo apt-get install libomp-dev

        - name: build Demo
          run: |
              mkdir build
              cd build
              cmake ..
              make
          working-directory: ./project3d/Demo

    test:
        runs-on: ubuntu-latest
        needs: [build]
        steps:
        - name: execute Demo
          run: ./Program
          working-directory: ./project3d/Demo/build

